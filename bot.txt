import telebot

# Substitua pelo token do seu bot
API_TOKEN = "7973285242:AAELW9YAijEPaZnozOiJ61eq_-WjQGxHXYY"

# Inicializando o bot
bot = telebot.TeleBot(API_TOKEN)

# Dados fictÃ­cios do jogador
players = {}

# Comando /start
@bot.message_handler(commands=['start'])
def send_welcome(message):
    user_id = message.chat.id
    if user_id not in players:
        players[user_id] = {"coffee_beans": 0, "farmers": 1}
    bot.reply_to(
        message,
        "â˜• Bem-vindo ao Coffee Miner! "
        "Seu objetivo Ã© minerar grÃ£os de cafÃ© e construir sua fazenda. "
        "Use /mine para comeÃ§ar a minerar!"
    )

# Comando /mine
@bot.message_handler(commands=['mine'])
def mine_beans(message):
    user_id = message.chat.id
    players[user_id]["coffee_beans"] += players[user_id]["farmers"]
    bot.reply_to(
        message,
        f"VocÃª colheu â˜• {players[user_id]['farmers']} grÃ£o(Ãµes) de cafÃ©! "
        f"Total de grÃ£os: {players[user_id]['coffee_beans']}."
    )

# Comando /shop
@bot.message_handler(commands=['shop'])
def shop(message):
    user_id = message.chat.id
    markup = telebot.types.InlineKeyboardMarkup()
    button = telebot.types.InlineKeyboardButton(
        "Comprar um Fazendeiro (10 grÃ£os)", callback_data="buy_farmer"
    )
    markup.add(button)
    bot.send_message(
        user_id,
        "ğŸŒ± Loja:\n"
        "- Fazendeiros aumentam sua produÃ§Ã£o de grÃ£os!\n"
        "Cada fazendeiro custa 10 grÃ£os de cafÃ©.",
        reply_markup=markup,
    )

# Lidar com interaÃ§Ãµes na loja
@bot.callback_query_handler(func=lambda call: True)
def handle_query(call):
    user_id = call.message.chat.id
    if call.data == "buy_farmer" and players[user_id]["coffee_beans"] >= 10:
        players[user_id]["coffee_beans"] -= 10
        players[user_id]["farmers"] += 1
        bot.answer_callback_query(call.id, "VocÃª comprou um fazendeiro! ğŸŒ¾")
        bot.send_message(
            user_id,
            f"Agora vocÃª tem {players[user_id]['farmers']} fazendeiro(s). "
            f"GrÃ£os restantes: {players[user_id]['coffee_beans']}."
        )
    else:
        bot.answer_callback_query(call.id, "GrÃ£os insuficientes para comprar fazendeiro! â˜•")

# Rodar o bot
bot.polling()
